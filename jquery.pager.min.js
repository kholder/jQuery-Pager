/** 
 * @author kholder  
 * Copyright (c) 2012 Kirk Holder 
 * released under MIT license
 */
(function(b){b.fn.pager=function(f){for(var d=0,g="",c=b.extend({display:10,navMax:5,location:"before",index:0},f),m=b(this).children(),i="",f="",l=0,n=0,o=0,j=0,a=0,h=function(a){return a.replace(/\D/g,"")},k=function(e){j=Math.min(e*c.display,l);j=Math.max(j,0);n=Math.min(j+c.display,l);m.css("display","none").slice(j,n).css("display","block");a=Math.max(Math.min(e+1,d),0);b(".pager a").removeClass("active");b(".pager a#pager"+a).addClass("active");d>c.navMax&&b(".pager li.item").removeClass("disable").each(function(a){0!==
a&&a!==d-1&&(3>=e&&a>Math.round(c.navMax)||4<=e&&e<d-1&&(a<e-Math.floor(c.navMax/2)||a>e+Math.floor(c.navMax/2))||e>=d-Math.round(c.navMax/2)&&a<e-c.navMax)&&b(this).addClass("disable")});window.location.hash=a},o=0===window.location.hash.length?c.index:parseInt(h(window.location.hash),10)-1,l=m.length,d=Math.ceil(l/c.display),g='<ul class="pager"><li><a href="#" rel="Prev">Prev</a></li>',a=1;a<=d;a+=1)g+='<li class="item"><a href="#'+a+'" id="pager'+a+'" rel="'+a+'">'+a+"</a></li>";g+='<li><a href="#" rel="Next">Next</a></li></ul>';
"string"===typeof c.location&&1<d&&(f=c.location.toLowerCase(),("before"===f||"both"===f)&&this.before(g),("after"===f||"both"===f)&&this.after(g),b(".pager > li > a").click(function(){i=b(this).attr("rel").toLowerCase();0<h(i).length?(a=parseInt(h(i),10)-1,k(a)):"prev"===i?(a=Math.max(parseInt(h(window.location.hash),10)-2,0),k(a)):"next"===i&&(a=Math.min(parseInt(h(window.location.hash),10),d-1),k(a));return!1}),b("ul.pager").each(function(){this.style.webkitTransform="scale(1)";b(this).append('<div id="pager_redraw"></div>');
b("#pager_redraw").fadeOut("fast",function(){b(this).unbind().remove()})}));window.onhashchange=function(){a=parseInt(h(window.location.hash),10)-1;k(a)};k(o);return this}})(jQuery||{});